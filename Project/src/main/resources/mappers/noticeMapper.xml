<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com.project.mappers.NoticeMapper">
	<insert id="insertBoardNotice" parameterType="com.project.vodto.Board">
	    <selectKey keyProperty="ref" order="AFTER" resultType="java.lang.Integer">
	        SELECT LAST_INSERT_ID() AS ref;
	    </selectKey>
	    INSERT INTO gott123.board(author, category_id, title, content, likes, ref)
	    VALUES (#{author}, #{categoryId}, #{title}, <![CDATA[#{content}]]>, 0, #{ref});
	</insert>
  	<select id="selectBoardNotice" resultType="com.project.vodto.Board">
  		select * from board where category_id = 3 or category_id = 4 order by created_date;
  	</select>
  	<select id="selectBoardNoticeByNo" resultType="com.project.vodto.Board">
  		select * from board where post_no = #{no}
  	</select>
  	<select id="selectNoticePostNoPrev" resultType="int">
  		<![CDATA[select post_no from board where (category_id = 3 or category_id = 4) and post_no < #{no} order by post_no desc limit 1]]>
  	</select>
  	<select id="selectNoticePostNoNext" resultType="int">
  		<![CDATA[select post_no from board where (category_id = 3 or category_id = 4) and post_no > #{no} order by post_no limit 1]]>
  	</select>
  </mapper>